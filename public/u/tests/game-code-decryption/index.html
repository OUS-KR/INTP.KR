<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>암호 해독 (시저 암호)</title>
    <link rel="stylesheet" href="/assets/css/main.css">
    <style>
        .game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 20px;
        }
        .cipher-display, .decrypted-display {
            background-color: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            width: 100%;
            max-width: 600px;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-size: 1.2em;
            font-weight: bold;
            word-break: break-word;
        }
        .controls {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        .controls button {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 1px solid var(--card-border);
            background-color: var(--container-bg);
            color: var(--text-color);
            font-size: 1.5em;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .controls button:hover {
            background-color: var(--card-border);
        }
        #shift-value {
            font-size: 1.5em;
            font-weight: bold;
            width: 50px;
            text-align: center;
        }
        #next-puzzle-btn {
            margin-left: 20px;
            padding: 12px 24px;
            font-size: 1.1em;
            border-radius: 5px;
            background-color: var(--btn-primary-bg);
            color: var(--btn-primary-text);
            border: none;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        #next-puzzle-btn:hover {
            background-color: var(--btn-primary-hover);
        }
        .message {
            margin-top: 20px;
            font-size: 1.1em;
            color: var(--h-color);
            text-align: center;
            min-height: 24px;
        }
    </style>
</head>
<body>
    <header class="main-nav">
        <a href="/u/tests/" class="logo">INTP.KR Tests</a>
        <div class="nav-right-section">
            <nav class="nav-links" id="nav-links">
                <div class="nav-item dropdown">
                    <button class="dropdown-toggle">정보</button>
                    <div class="dropdown-menu">
                        <a href="/u/tests/info-characteristics/">특징</a>
                        <a href="/u/tests/info-careers/">커리어</a>
                        <a href="/u/tests/info-cognitive-functions/">인지기능</a>
                        <a href="/u/tests/info-subtypes/">하위유형</a>
                        <a href="/u/tests/info-relationships/">인간관계</a>
                        <a href="/u/tests/info-misconceptions/">흔한 오해</a>
                    </div>
                </div>
                <div class="nav-item dropdown">
                    <button class="dropdown-toggle">테스트</button>
                    <div class="dropdown-menu">
                        <a href="/u/tests/test-logic-quiz/">논리력 퀴즈</a>
                        <a href="/u/tests/test-relationship-style/">연애 스타일 테스트</a>
                        <a href="/u/tests/test-stress-triggers/">스트레스 테스트</a>
                        <a href="/u/tests/test-brain-utilization/">두뇌 활용 테스트</a>
                        <a href="/u/tests/test-bingo/">빙고 챌린지</a>
                        <a href="/u/tests/test-empathy-quiz/">INTP 공감 퀴즈</a>
                    </div>
                </div>
                <div class="nav-item dropdown">
                    <button class="dropdown-toggle">게임</button>
                    <div class="dropdown-menu">
                        <a href="/u/tests/game-logic-puzzle/">논리 퍼즐</a>
                        <a href="/u/tests/game-strategy-simulation/">전략 시뮬레이션</a>
                        <a href="/u/tests/game-code-decryption/">암호 해독</a>
                        <a href="/u/tests/game-abstract-reasoning/">추상적 사고 게임</a>
                        <a href="/u/tests/game-travel-planner/">가상 시스템 구축</a>
                        <a href="/u/tests/game-maze-challenge/">미로 챌린지</a>
                    </div>
                </div>
            </nav>
            <button id="theme-switcher" class="theme-switcher">🌙</button>
            <button id="hamburger" class="hamburger">☰</button>
        </div>
    </header>
    <div class="container">
        <h1>암호 해독 (시저 암호)</h1>
        <p style="text-align:center;">암호화된 메시지를 해독하여 숨겨진 의미를 찾아보세요!</p>
        
        <div class="game-container">
            <div class="cipher-display" id="encrypted-message"></div>
            <div class="controls">
                <button id="shift-minus">-</button>
                <span id="shift-value">0</span>
                <button id="shift-plus">+</button>
                <button id="next-puzzle-btn" style="display: none;">다음 문제</button>
            </div>
            <div class="decrypted-display" id="decrypted-message"></div>
            <div id="message" class="message"></div>
        </div>
    </div>

    <script src="/assets/js/main.js" defer></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const encryptedMessageElement = document.getElementById('encrypted-message');
            const decryptedMessageElement = document.getElementById('decrypted-message');
            const shiftValueElement = document.getElementById('shift-value');
            const shiftMinusBtn = document.getElementById('shift-minus');
            const shiftPlusBtn = document.getElementById('shift-plus');
            const nextPuzzleBtn = document.getElementById('next-puzzle-btn');
            const messageElement = document.getElementById('message');

            const plaintexts = [
                "logic is my playground",
                "i think therefore i am",
                "knowledge is power",
                "question everything",
                "analysis over emotion",
                "the architect of ideas",
                "curiosity is my compass",
                "patterns emerge from chaos",
                "a mind is a terrible thing to waste",
                "introverted intuitive thinking perceiving",
                "the world is a complex system to be understood",
                "i need solitude to recharge my mind",
                "endless curiosity for the win",
                "sarcasm is my second language",
                "overthinking is my default state",
                "i value precision in language",
                "let the data speak for itself",
                "a good theory is a thing of beauty",
                "i live inside my own head",
                "small talk is a necessary evil",
                "i seek universal principles",
                "competence is more important than credentials",
                "i prefer email to phone calls",
                "the answer is in the details",
                "i have a low tolerance for illogical arguments",
                "my inner world is a vast and intricate landscape",
                "i am a lifelong learner",
                "i question authority and tradition",
                "the pursuit of truth is a noble endeavor",
                "i find comfort in abstract concepts"
            ];

            let currentPlaintext = '';
            let currentEncryptedMessage = '';
            let correctShift = 0;
            let currentShift = 0;

            function caesarCipher(text, shift, mode) {
                const direction = mode === 'encrypt' ? 1 : -1;
                return text.split('').map(char => {
                    if (char >= 'a' && char <= 'z') {
                        return String.fromCharCode(((char.charCodeAt(0) - 'a'.charCodeAt(0) + (shift * direction) + 26) % 26) + 'a'.charCodeAt(0));
                    } else if (char >= 'A' && char <= 'Z') {
                        return String.fromCharCode(((char.charCodeAt(0) - 'A'.charCodeAt(0) + (shift * direction) + 26) % 26) + 'A'.charCodeAt(0));
                    } else {
                        return char;
                    }
                }).join('');
            }

            function startNewGame() {
                currentPlaintext = plaintexts[Math.floor(Math.random() * plaintexts.length)];
                correctShift = Math.floor(Math.random() * 25) + 1; // 1-25
                currentEncryptedMessage = caesarCipher(currentPlaintext, correctShift, 'encrypt');
                currentShift = 0;
                
                nextPuzzleBtn.style.display = 'none';
                shiftMinusBtn.disabled = false;
                shiftPlusBtn.disabled = false;

                updateDisplay();
            }

            function updateDisplay() {
                encryptedMessageElement.textContent = currentEncryptedMessage.toUpperCase();
                shiftValueElement.textContent = currentShift;
                const decryptedText = caesarCipher(currentEncryptedMessage, currentShift, 'decrypt');
                decryptedMessageElement.textContent = decryptedText.toUpperCase();
                
                if (decryptedText === currentPlaintext) {
                    messageElement.textContent = '정답입니다! 훌륭해요!';
                    nextPuzzleBtn.style.display = 'inline-block';
                    shiftMinusBtn.disabled = true;
                    shiftPlusBtn.disabled = true;
                } else {
                    messageElement.textContent = '';
                }
            }

            shiftMinusBtn.addEventListener('click', () => {
                currentShift = (currentShift - 1 + 26) % 26;
                updateDisplay();
            });

            shiftPlusBtn.addEventListener('click', () => {
                currentShift = (currentShift + 1) % 26;
                updateDisplay();
            });

            nextPuzzleBtn.addEventListener('click', startNewGame);

            startNewGame();
        });
    </script>
</body>
</html>>